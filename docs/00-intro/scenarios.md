# Сценарии использования системы InvestCalc

Документ описывает основные пользовательские сценарии (Use Cases), которые отражают, как различные пользователи взаимодействуют с системой InvestCalc в рамках её функциональности.

Сценарии охватывают:
- ввод данных;
- выполнение расчётов;
- анализ чувствительности;
- сравнение сценариев;
- формирование отчётности;
- использование API.

---

## 1. Роли пользователей

### 1.1. Студент / Аналитик
Вносит данные, создаёт разные варианты расчётов, анализирует результаты и готовит отчёт.

### 1.2. Преподаватель / Руководитель
Просматривает результаты, проверяет корректность расчётов и оценивает окупаемость ИС.

### 1.3. Внешние сервисы (через API)
Используют InvestCalc как backend для:
- учебных CRM,
- сервисов расчёта эффективности,
- интеграционных модулей.

---

## 2. Сценарий 1 — Базовый расчёт экономической эффективности

### Цель:
Получить TCO, ROI и срок окупаемости для проекта внедрения ИС.

### Основной поток:
1. Пользователь открывает интерфейс InvestCalc или делает API-запрос.
2. Вводит следующие данные:
   - CAPEX;
   - OPEX (годовой);
   - период анализа (лет);
   - экономический эффект в год.
3. Нажимает «Рассчитать».
4. Система выполняет:
   - TCO = CAPEX + OPEX × период;
   - ROI = (Эффект × период – TCO) / TCO;
   - Payback Period = CAPEX / (Эффект – OPEX), если эффект > OPEX.
5. Пользователь видит результат с интерпретацией.

### Результат:
Показатели эффективности, готовые к использованию в отчёте.

---

## 3. Сценарий 2 — Анализ чувствительности (±20%)

### Цель:
Понять, как изменятся параметры эффективности при возможных колебаниях затрат и эффектов.

### Основной поток:
1. Пользователь выбирает исходный расчет.
2. Нажимает «Анализ чувствительности».
3. Система автоматически генерирует вариации:
   - CAPEX × (0.8 / 1.0 / 1.2);
   - OPEX × (0.8 / 1.0 / 1.2).
4. Для каждой вариации рассчитываются TCO, ROI, Payback.
5. Система отображает результаты в виде:
   - таблицы;
   - графика (опционально);
   - JSON (если API).

### Результат:
Матрица вариаций с рекомендациями для принятия решений.

---

## 4. Сценарий 3 — Сравнение сценариев (например, On-Premises vs Cloud)

### Цель:
Оценить, какой вариант внедрения ИС экономически выгоднее.

### Основной поток:
1. Пользователь создаёт два сценария:
   - локальный (input-local.json),
   - облачный (input-cloud.json).
2. Вызывает функцию сравнения.
3. Система рассчитывает TCO, ROI, Payback для каждого.
4. Система строит сравнительную таблицу:
   - разница CAPEX;
   - различия OPEX;
   - различия в эффекте;
   - общий вывод.
5. Пользователь выбирает лучший вариант.

### Результат:
Рекомендация: например, «Cloud-решение быстрее окупается на 1.5 года».

---

## 5. Сценарий 4 — Генерация отчёта

### Цель:
Сформировать отчёт для преподавателя или руководителя.

### Основной поток:
1. Пользователь выбирает расчёт.
2. Нажимает «Сформировать отчёт».
3. Система формирует:
   - HTML-отчёт (обязательно),
   - PDF (опционально).
4. В отчёт включаются:
   - входные данные;
   - результаты расчётов;
   - анализ чувствительности;
   - графики/таблицы (если доступны);
   - рекомендации.

### Результат:
Готовый документ, который можно прикрепить в LMS или предоставить руководству.

---

## 6. Сценарий 5 — Использование API внешними приложениями

### Цель:
Позволить внешним сервисам выполнять расчёты без UI.

### Основной поток:
1. Внешняя система отправляет POST-запрос на:
   - `/api/v1/calculate`,
   - `/api/v1/sensitivity`.
2. Передаёт JSON с параметрами.
3. InvestCalc выполняет расчёт.
4. Отдаёт результат в JSON:
   - TCO, ROI, Payback;
   - анализ чувствительности;
   - статусы.
5. Внешняя система использует данные:
   - в дашбордах,
   - в учебных веб-приложениях.

### Результат:
Интеграция InvestCalc в комплекс учебных проектов.

---

## 7. Сценарий 6 — Проверка корректности данных (валидация)

### Цель:
Защитить пользователя от ошибок ввода.

### Основной поток:
1. Пользователь вводит данные.
2. Система проверяет:
   - CAPEX ≥ 0;
   - OPEX ≥ 0;
   - период анализа ≥ 1;
   - эффекты ≥ 0;
   - эффекты > OPEX → проект может окупиться.
3. При ошибке система выводит понятное сообщение:
   - «Проект не окупается при данных параметрах»;
   - «Введите корректное число лет»;
   - «CAPEX не может быть отрицательным».

### Результат:
Чистые и корректные входные данные.

---

## 8. Сценарий 7 — Работа в командном проекте

### Цель:
Распределение работы между студентами.

### Основной поток:
1. Команда создаёт fork/репозиторий.
2. Делит задачи:
   - один делает расчёты,
   - другой API,
   - третий документацию,
   - четвёртый DevOps.
3. Каждый участник пушит свою часть.
4. Проверка преподавателем проходит по итоговой версии.

### Результат:
Синхронная работа команды над InvestCalc.

 