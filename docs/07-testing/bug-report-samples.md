# Bug Report Samples — Примеры баг-репортов для InvestCalc

Документ содержит образцы правильно оформленных отчётов о дефектах.

---

## 1. Шаблон баг-репорта

- **ID:** BUG-XXX  
- **Заголовок:** Краткое описание  
- **Окружение:** ОС, версия Python, способ запуска (Docker/локально)  
- **Предусловия:**  
- **Шаги воспроизведения:**  
- **Ожидаемый результат:**  
- **Фактический результат:**  
- **Вложения:** скриншоты, логи, JSON  
- **Важность (Severity):** Blocker / Critical / Major / Minor / Trivial  
- **Приоритет (Priority):** High / Medium / Low  
- **Статус:** New / In progress / Fixed / Won’t fix  

---

## 2. Пример 1 — Некорректный расчёт Payback

- **ID:** BUG-001  
- **Заголовок:** Payback не равен TCO / Effect при простом случае  
- **Окружение:**  
  - Windows 11, Python 3.12, запуск локально  
- **Предусловия:**  
  - Сервис запущен  
- **Шаги:**
  1. Отправить POST `/api/v1/calculate` с:
     ```json
     {"capex": 100000, "opex": 0, "period": 1, "effect": 50000}
     ```
  2. Посмотреть поле `payback`.
- **Ожидаемый результат:**
  - Payback = `TCO / Effect = 100000 / 50000 = 2.0`
- **Фактический результат:**
  - Payback = 1.0  
- **Вложения:**  
  - скриншот Swagger-ответа, лог сервера.  
- **Severity:** Major  
- **Priority:** High  
- **Статус:** New  

---

## 3. Пример 2 — Валидация не отлавливает отрицательный OPEX

- **ID:** BUG-002  
- **Заголовок:** Отрицательный OPEX проходит валидацию  
- **Окружение:**  
  - Docker, образ `investcalc:latest`  
- **Шаги:**
  1. POST `/api/v1/calculate`:
     ```json
     {"capex": 100000, "opex": -20000, "period": 3, "effect": 50000}
     ```
- **Ожидаемый результат:**
  - HTTP 400/422, сообщение об ошибке по полю `opex`.
- **Фактический результат:**
  - HTTP 200, расчёт выполнен.
- **Severity:** Critical  
- **Priority:** High  
- **Статус:** New  

---

## 4. Пример 3 — Неверное сравнение сценариев (ROI равны)

- **ID:** BUG-003  
- **Заголовок:** При равном ROI не используется TCO как второй критерий  
- **Окружение:**  
  - Linux, Python 3.12  
- **Шаги:**
  1. Подготовить два сценария с одинаковым ROI и разным TCO.
  2. Вызвать `/api/v1/compare`.
- **Ожидаемый результат:**
  - Выбран сценарий с меньшим TCO (согласно BR-08).
- **Фактический результат:**
  - Всегда выбирается первый сценарий.
- **Severity:** Major  
- **Priority:** Medium  
- **Статус:** New  

