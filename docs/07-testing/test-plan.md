# План тестирования системы «InvestCalc — Инвестиционный аналитик ИС»

Документ определяет объём, подход, ресурсы и расписание работ по тестированию проекта InvestCalc.

---

## 1. Цели тестирования

- Проверить корректность реализации бизнес-правил (расчёт TCO, ROI, Payback, анализ чувствительности, сравнение сценариев).
- Убедиться, что API работает стабильно и предсказуемо.
- Обнаружить и описать дефекты.
- Подтвердить, что система соответствует требованиям раздела `02-requirements/`.

---

## 2. Объект тестирования

Тестируется:

- исходный код в `src/`:
  - `main.py`
  - `api/v1/routes_invest.py`
  - `models/invest.py`
  - `services/invest_service.py`
- конфигурация `core/config.py`;
- JSON-данные в `data/`;
- генерация HTML-отчёта (минимум smoke-проверка, если реализовано);
- Docker-сборка и запуск (на уровне smoke-тестов).

---

## 3. Виды тестирования

- Модульное тестирование (unit, pytest).
- Интеграционное тестирование API (через TestClient/FastAPI).
- Тестирование граничных значений.
- Тестирование ошибок валидации.
- Smoke-тесты Docker-сборки.
- (Опционально) Небольшие нагрузочные тесты.

---

## 4. Область охвата

### 4.1. Что тестируется

- Функции расчёта:
  - `calculate_tco`
  - `calculate_roi`
  - `calculate_payback`
  - `calculate_all`
- Анализ чувствительности:
  - корректность 80/100/120%;
  - корректность пересчёта метрик.
- Сравнение сценариев:
  - выбор рекомендованного сценария;
  - формирование justification.
- API-эндпоинты:
  - `/api/v1/calculate`
  - `/api/v1/sensitivity`
  - `/api/v1/compare`
  - `/api/v1/report` (если реализовано)
  - `/api/v1/health`.

### 4.2. Что НЕ тестируется

- Нагрузочные тесты уровня прод-окружения.
- Безопасность на уровне прод-стандартов (JWT, ACL).
- UI React/Next.js (если он только планируется).

---

## 5. Средства и инструменты

- Язык: Python 3.12
- Фреймворк тестирования: `pytest`
- Вспомогательные средства:
  - `httpx` / `fastapi.testclient`
  - Docker (для smoke-тестов контейнера)
- CI:
  - GitHub Actions (запуск тестов при push/PR).

---

## 6. Критерии начала и завершения тестирования

### 6.1. Старт

Тестирование начинается, когда:

- реализованы основные функции расчётов и API-эндпоинты;
- написаны базовые тесты для `services` и `api`.

### 6.2. Завершение

Тестирование считается завершённым, если:

- все автотесты проходят успешно;
- достигнут целевой уровень покрытия (по договорённости, например, ≥70% для core-логики);
- все критические дефекты исправлены;
- сформирован список известных ограничений.

---

## 7. Роли и ответственность

- **Разработчики** — пишут тесты для своего кода, исправляют найденные ошибки.
- **Тимлид** — контролирует покрытие и выполнение плана.
- **Преподаватель** — может задавать дополнительные сценарии тестирования.

---

## 8. График тестирования (грубый план)

- Неделя 1–2: реализация базовой логики + базовые unit-тесты.
- Неделя 2–3: написание API-тестов, расширение набора кейсов.
- Неделя 3: интеграция с Docker и CI, запуск тестов в pipeline.
- Неделя 4: финальное прогоны, фиксация метрик, отчёт.
 