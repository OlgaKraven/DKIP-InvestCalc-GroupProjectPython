## Нефункциональные требованияк информационной системе «InvestCalc — Инвестиционный аналитик ИС»

Документ описывает качественные характеристики системы, которые не относятся напрямую к функциональности, но существенно влияют на её эксплуатацию, сопровождение и использование.

---

## 1. Требования к производительности

## НФТ-1. Время ответа API  
Система должна обрабатывать запросы:
- базового расчёта — **≤ 0.5 секунды**,
- анализа чувствительности — **≤ 1 секунды**.

## НФТ-2. Пропускная способность  
В учебных условиях сервис должен выдерживать **не менее 50 RPS** (запросов в секунду).

## НФТ-3. Масштабируемость  
Архитектура должна позволять горизонтальное масштабирование за счёт:
- запуска нескольких экземпляров API в Docker,
- использования внешних балансировщиков.

---

## 2. Требования к надёжности

## НФТ-4. Устойчивость к ошибкам ввода  
Система должна корректно обрабатывать:
- некорректные данные,
- отрицательные значения,
- пустые поля,
- неверные типы данных.

В ответ должна отправляться подробная ошибка валидации (Pydantic).

## НФТ-5. Устойчивость к отказам  
Приложение должно корректно перезапускаться:
- при обновлении Docker-контейнера,
- при падении Uvicorn,
- при перезагрузке сервера.

## НФТ-6. Автоматическое тестирование  
Система должна содержать:
- модульные тесты,
- тесты API,
- минимум 60% покрытия логики.

---

## 3. Требования к безопасности

## НФТ-7. Обработка данных  
Система не должна сохранять:
- персональные данные,
- историю запросов,
- файлы пользователей.

InvestCalc работает как **stateless** сервис.

## НФТ-8. Безопасность API  
API должен обеспечивать:
- валидацию входных данных,
- защиту от некорректных запросов,
- исключение возможности выполнения произвольного кода.

## НФТ-9. Настройки через переменные окружения  
Все конфиденциальные параметры должны быть перенесены в:
- `.env`,
- переменные окружения Docker.

---

## 4. Требования к совместимости

## НФТ-10. Совместимость по платформам  
Сервис должен корректно запускаться на:

- Windows 10+
- Linux (Ubuntu 20.04+)
- MacOS (опционально)

## НФТ-11. Поддержка контейнеризации  
Сервис должен запускаться в Docker через:
- `Dockerfile`
- `docker-compose.yml`

## НФТ-12. Совместимость API  
JSON-формат должен быть совместим с:

- web-клиентами (React, Vue, Angular),
- backend-сервисами (Node.js, Python, C##, Java),
- Postman / HTTPie / curl.

---

## 5. Требования к сопровождению

## НФТ-13. Документирование  
Система должна включать:
- README,
- документацию MkDocs,
- Swagger / Redoc,
- DevOps-документацию,
- инструкции по развёртыванию.

## НФТ-14. Логирование  
Минимальный уровень логирования:
- ошибки API,
- ошибки бизнес-логики,
- серверные ошибки FastAPI/Uvicorn.

Расширенное логирование — в DevOps-режиме.

## НФТ-15. Мониторинг  
Система должна поддерживать:
- `/health` эндпоинт (минимум),
- структурированное логирование (JSON) в контейнере.

---

## 6. Требования к удобству использования

## НФТ-16. Прозрачность результатов  
API должен возвращать:
- входные данные,
- результаты,
- интерпретацию,
- пометки о невозможности окупаемости.

## НФТ-17. Простота запуска  
Для запуска сервиса должно быть достаточно команд:

uvicorn src.main:app --reload

или

docker-compose up --build

## НФТ-18. Простота сопровождения  
Код должен:
- содержать комментарии,
- иметь простую структуру каталогов,
- быть легко расширяемым.

---

## 7. Требования к архитектуре

## НФТ-19. Модульность  
Система должна быть разделена на слои:
- API,
- сервисная логика,
- модели данных,
- конфигурации.

## НФТ-20. Тестируемость  
Каждый слой должен быть тестируем отдельно.

## НФТ-21. Stateless-архитектура  
Сервис не должен хранить состояние между запросами.

---

## 8. Требования к качеству кода

## НФТ-22. Стиль кода  
Код должен соответствовать:
- PEP8,
- рекомендациям FastAPI.

## НФТ-23. Статический анализ  
(Опционально) использовать ruff или flake8.

## НФТ-24. Структура проекта  
Проект должен включать:
- `src/` — код,
- `tests/` — тесты,
- `docs/` — документацию,
- `devops/` — инфраструктуру.

---

## 9. Требования к развертыванию (Deployment)

## НФТ-25. Локальный запуск  
Проект должен запускаться без ошибок на локальных машинах.

## НФТ-26. Docker-развёртывание  
Сервис должен включать:

- рабочий `Dockerfile`,
- `docker-compose.yml`,
- инструкции в `devops/docker-instructions.md`.

## НФТ-27. CI/CD  
Команда должна настроить GitHub Actions для:
- установки зависимостей,
- запуска тестов,
- сборки Docker-образа.

